pipeline {
  agent {
    docker { image 'rachidouqa/android-14-emulator' }
  }

  tools {
    nodejs 'NodeJS'
    maven 'mvn'
  }

  stages {
    stage('Test') {
      steps {
        sh 'echo "hi"'
        sh 'sdkmanager --version'
        sh 'avdmanager --version'
        sh 'echo "no" | avdmanager create avd -k "system-images;android-34;google_apis_playstore;x86_64" -n test'
        sh 'emulator -avd test -no-window -gpu off'
      }
    }
  }
}
