pipeline {
  agent {
    docker { image 'rachidouqa/android_14_emulator' }
  }

  tools {
    nodejs 'NodeJS'
    maven 'mvn'
  }

  stages {
    stage('Test') {
      steps {
        sh 'echo "$ANDROID_SDK_ROOT"'
        sh 'echo "$PATH"'
        sh 'appium'
        sh 'sdkmanager --list'
        
        sh "avdmanager -s create avd  -n test -k 'system-images;android-34;google_apis_playstore;x86_64'"
        sh 'emulator -avd test -no-window -gpu off'
      }
    }
  }
}
